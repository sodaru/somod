var be=Object.create;var P=Object.defineProperty;var we=Object.getOwnPropertyDescriptor;var pe=Object.getOwnPropertyNames;var ge=Object.getPrototypeOf,me=Object.prototype.hasOwnProperty;var I=c=>P(c,"__esModule",{value:!0});var D=(c,l)=>()=>(l||c((l={exports:{}}).exports,l),l.exports),Oe=(c,l)=>{for(var u in l)P(c,u,{get:l[u],enumerable:!0})},G=(c,l,u,t)=>{if(l&&typeof l=="object"||typeof l=="function")for(let e of pe(l))!me.call(c,e)&&(u||e!=="default")&&P(c,e,{get:()=>l[e],enumerable:!(t=we(l,e))||t.enumerable});return c},R=(c,l)=>G(I(P(c!=null?be(ge(c)):{},"default",!l&&c&&c.__esModule?{get:()=>c.default,enumerable:!0}:{value:c,enumerable:!0})),c),je=(c=>(l,u)=>c&&c.get(l)||(u=G(I({}),l,1),c&&c.set(l,u),u))(typeof WeakMap!="undefined"?new WeakMap:0);var N=D(h=>{"use strict";var S=h&&h.__assign||function(){return S=Object.assign||function(c){for(var l,u=1,t=arguments.length;u<t;u++){l=arguments[u];for(var e in l)Object.prototype.hasOwnProperty.call(l,e)&&(c[e]=l[e])}return c},S.apply(this,arguments)},C=h&&h.__awaiter||function(c,l,u,t){function e(n){return n instanceof u?n:new u(function(r){r(n)})}return new(u||(u=Promise))(function(n,r){function a(s){try{o(t.next(s))}catch(d){r(d)}}function i(s){try{o(t.throw(s))}catch(d){r(d)}}function o(s){s.done?n(s.value):e(s.value).then(a,i)}o((t=t.apply(c,l||[])).next())})},F=h&&h.__generator||function(c,l){var u={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},t,e,n,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(o){return function(s){return i([o,s])}}function i(o){if(t)throw new TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(u=0)),u;)try{if(t=1,e&&(n=o[0]&2?e.return:o[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,o[1])).done)return n;switch(e=0,n&&(o=[o[0]&2,n.value]),o[0]){case 0:case 1:n=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,e=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(n=u.trys,!(n=n.length>0&&n[n.length-1])&&(o[0]===6||o[0]===2)){u=0;continue}if(o[0]===3&&(!n||o[1]>n[0]&&o[1]<n[3])){u.label=o[1];break}if(o[0]===6&&u.label<n[1]){u.label=n[1],n=o;break}if(n&&u.label<n[2]){u.label=n[2],u.ops.push(o);break}n[2]&&u.ops.pop(),u.trys.pop();continue}o=l.call(c,u)}catch(s){o=[6,s],e=0}finally{t=n=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};h.__esModule=!0;h.getMiddlewareHandler=h.MiddlewareContext=void 0;var B=function(){function c(){var l=this.constructor;this.context={},Object.setPrototypeOf(this,l.prototype)}return c.prototype.set=function(l,u){this.context[l]=u},c.prototype.get=function(l){return this.context[l]},c}();h.MiddlewareContext=B;var Pe=function(c,l,u,t){return C(void 0,void 0,void 0,function(){var e;return F(this,function(n){switch(n.label){case 0:e=c(l,u,t),n.label=1;case 1:return typeof(e==null?void 0:e.then)!="function"?[3,3]:[4,e];case 2:return e=n.sent(),[3,1];case 3:return[2,e]}})})},Se=function(c,l){return function(u,t,e){return C(void 0,void 0,void 0,function(){var n,r,a;return F(this,function(i){switch(i.label){case 0:return n=S(S({},u),{somodMiddlewareContext:new B}),r=l.length,a=function(){return C(void 0,void 0,void 0,function(){var o,s,d;return F(this,function(f){switch(f.label){case 0:return r>0?(o=l[--r],[4,o(a,n,t)]):[3,2];case 1:return s=f.sent(),[2,s];case 2:return[4,Pe(c,n,t,e)];case 3:return d=f.sent(),[2,d]}})})},[4,a()];case 1:return[2,i.sent()]}})})}};h.getMiddlewareHandler=Se});var H=D(m=>{"use strict";var Me=m&&m.__createBinding||(Object.create?function(c,l,u,t){t===void 0&&(t=u);var e=Object.getOwnPropertyDescriptor(l,u);(!e||("get"in e?!l.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(c,t,e)}:function(c,l,u,t){t===void 0&&(t=u),c[t]=l[u]});m.__esModule=!0;m.getMiddlewareHandler=void 0;var Te=N();Me(m,Te,"getMiddlewareHandler")});var fe=D((Be,E)=>{var V,K,q,z,L,W,J,Q,U,X,Y,Z,$,M,A,x,k,ee,O,te,ne,re,ae,ie,oe,ce,ue,le,T;(function(c){var l=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(t){c(u(l,u(t)))}):typeof E=="object"&&typeof E.exports=="object"?c(u(l,u(E.exports))):c(u(l));function u(t,e){return t!==l&&(typeof Object.create=="function"?Object.defineProperty(t,"__esModule",{value:!0}):t.__esModule=!0),function(n,r){return t[n]=e?e(n,r):r}}})(function(c){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])};V=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");l(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)},K=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},q=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n},z=function(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},L=function(t,e){return function(n,r){e(n,r,t)}},W=function(t,e,n,r,a,i){function o(j){if(j!==void 0&&typeof j!="function")throw new TypeError("Function expected");return j}for(var s=r.kind,d=s==="getter"?"get":s==="setter"?"set":"value",f=!e&&t?r.static?t:t.prototype:null,_=e||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),v,y=!1,b=n.length-1;b>=0;b--){var w={};for(var p in r)w[p]=p==="access"?{}:r[p];for(var p in r.access)w.access[p]=r.access[p];w.addInitializer=function(j){if(y)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(j||null))};var g=(0,n[b])(s==="accessor"?{get:_.get,set:_.set}:_[d],w);if(s==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(v=o(g.get))&&(_.get=v),(v=o(g.set))&&(_.set=v),(v=o(g.init))&&a.push(v)}else(v=o(g))&&(s==="field"?a.push(v):_[d]=v)}f&&Object.defineProperty(f,r.name,_),y=!0},J=function(t,e,n){for(var r=arguments.length>2,a=0;a<e.length;a++)n=r?e[a].call(t,n):e[a].call(t);return r?n:void 0},Q=function(t){return typeof t=="symbol"?t:"".concat(t)},U=function(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})},X=function(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)},Y=function(t,e,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(_){try{f(r.next(_))}catch(v){o(v)}}function d(_){try{f(r.throw(_))}catch(v){o(v)}}function f(_){_.done?i(_.value):a(_.value).then(s,d)}f((r=r.apply(t,e||[])).next())})},Z=function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(f){return function(_){return d([f,_])}}function d(f){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(n=0)),n;)try{if(r=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,a=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){n.label=f[1];break}if(f[0]===6&&n.label<i[1]){n.label=i[1],i=f;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(f);break}i[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(_){f=[6,_],a=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},$=function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&T(e,t,n)},T=Object.create?function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]},M=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,i=[],o;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},x=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(A(arguments[e]));return t},k=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r},ee=function(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},O=function(t){return this instanceof O?(this.v=t,this):new O(t)},te=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,i=[];return a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a;function o(y){r[y]&&(a[y]=function(b){return new Promise(function(w,p){i.push([y,b,w,p])>1||s(y,b)})})}function s(y,b){try{d(r[y](b))}catch(w){v(i[0][3],w)}}function d(y){y.value instanceof O?Promise.resolve(y.value.v).then(f,_):v(i[0][2],y)}function f(y){s("next",y)}function _(y){s("throw",y)}function v(y,b){y(b),i.shift(),i.length&&s(i[0][0],i[0][1])}},ne=function(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,i){e[a]=t[a]?function(o){return(n=!n)?{value:O(t[a](o)),done:!1}:i?i(o):o}:i}},re=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof M=="function"?M(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(s,d){o=t[i](o),a(s,d,o.done,o.value)})}}function a(i,o,s,d){Promise.resolve(d).then(function(f){i({value:f,done:s})},o)}},ae=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};var u=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};ie=function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&T(e,t,n);return u(e,t),e},oe=function(t){return t&&t.__esModule?t:{default:t}},ce=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},ue=function(t,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n},le=function(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)},c("__extends",V),c("__assign",K),c("__rest",q),c("__decorate",z),c("__param",L),c("__esDecorate",W),c("__runInitializers",J),c("__propKey",Q),c("__setFunctionName",U),c("__metadata",X),c("__awaiter",Y),c("__generator",Z),c("__exportStar",$),c("__createBinding",T),c("__values",M),c("__read",A),c("__spread",x),c("__spreadArrays",k),c("__spreadArray",ee),c("__await",O),c("__asyncGenerator",te),c("__asyncDelegator",ne),c("__asyncValues",re),c("__makeTemplateObject",ae),c("__importStar",ie),c("__importDefault",oe),c("__classPrivateFieldGet",ce),c("__classPrivateFieldSet",ue),c("__classPrivateFieldIn",le)})});var Ae={};Oe(Ae,{default:()=>Fe});var he=R(H());var se=R(fe(),1),{__extends:Ne,__assign:He,__rest:Ve,__decorate:Ke,__param:qe,__esDecorate:ze,__runInitializers:Le,__propKey:We,__setFunctionName:Je,__metadata:Qe,__awaiter:_e,__generator:de,__exportStar:Ue,__createBinding:Xe,__values:Ye,__read:Ze,__spread:$e,__spreadArrays:xe,__spreadArray:ke,__await:et,__asyncGenerator:tt,__asyncDelegator:nt,__asyncValues:rt,__makeTemplateObject:at,__importStar:it,__importDefault:ot,__classPrivateFieldGet:ct,__classPrivateFieldSet:ut,__classPrivateFieldIn:lt}=se.default;var ye=require("aws-sdk"),Ee=new ye.DynamoDB.DocumentClient({apiVersion:"2012-08-10",region:process.env.AWS_REGION}),De=function(c){return _e(void 0,void 0,void 0,function(){var l;return de(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Ee.delete({TableName:process.env.TABLE_NAME,Key:{connectionId:c.requestContext.connectionId}}).promise()];case 1:return u.sent(),[3,3];case 2:return l=u.sent(),[2,{statusCode:500,body:"Failed to disconnect: "+JSON.stringify(l)}];case 3:return[2,{statusCode:200,body:"Disconnected."}]}})})},ve=De;var Ce=(0,he.getMiddlewareHandler)(ve,[]),Fe=Ce;module.exports=je(Ae);0&&(module.exports={});
