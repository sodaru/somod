var vt=Object.create;var A=Object.defineProperty;var yt=Object.getOwnPropertyDescriptor;var pt=Object.getOwnPropertyNames;var ht=Object.getPrototypeOf,gt=Object.prototype.hasOwnProperty;var p=(e,u)=>()=>(u||e((u={exports:{}}).exports,u),u.exports),wt=(e,u)=>{for(var o in u)A(e,o,{get:u[o],enumerable:!0})},se=(e,u,o,c)=>{if(u&&typeof u=="object"||typeof u=="function")for(let t of pt(u))!gt.call(e,t)&&t!==o&&A(e,t,{get:()=>u[t],enumerable:!(c=yt(u,t))||c.enumerable});return e};var k=(e,u,o)=>(o=e!=null?vt(ht(e)):{},se(u||!e||!e.__esModule?A(o,"default",{value:e,enumerable:!0}):o,e)),mt=e=>se(A({},"__esModule",{value:!0}),e);var _e=p(w=>{"use strict";var U=w&&w.__assign||function(){return U=Object.assign||function(e){for(var u,o=1,c=arguments.length;o<c;o++){u=arguments[o];for(var t in u)Object.prototype.hasOwnProperty.call(u,t)&&(e[t]=u[t])}return e},U.apply(this,arguments)},ee=w&&w.__awaiter||function(e,u,o,c){function t(r){return r instanceof o?r:new o(function(n){n(r)})}return new(o||(o=Promise))(function(r,n){function i(l){try{a(c.next(l))}catch(d){n(d)}}function f(l){try{a(c.throw(l))}catch(d){n(d)}}function a(l){l.done?r(l.value):t(l.value).then(i,f)}a((c=c.apply(e,u||[])).next())})},te=w&&w.__generator||function(e,u){var o={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},c,t,r,n;return n={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function i(a){return function(l){return f([a,l])}}function f(a){if(c)throw new TypeError("Generator is already executing.");for(;n&&(n=0,a[0]&&(o=0)),o;)try{if(c=1,t&&(r=a[0]&2?t.return:a[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,a[1])).done)return r;switch(t=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,t=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){o=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(a[0]===6&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=u.call(e,o)}catch(l){a=[6,l],t=0}finally{c=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};w.__esModule=!0;w.getMiddlewareHandler=w.MiddlewareContext=void 0;var de=function(){function e(){var u=this.constructor;this.context={},Object.setPrototypeOf(this,u.prototype)}return e.prototype.set=function(u,o){this.context[u]=o},e.prototype.get=function(u){return this.context[u]},e}();w.MiddlewareContext=de;var bt=function(e,u,o,c){return ee(void 0,void 0,void 0,function(){var t;return te(this,function(r){switch(r.label){case 0:t=e(u,o,c),r.label=1;case 1:return typeof t?.then!="function"?[3,3]:[4,t];case 2:return t=r.sent(),[3,1];case 3:return[2,t]}})})},Ot=function(e,u){return function(o,c,t){return ee(void 0,void 0,void 0,function(){var r,n,i;return te(this,function(f){switch(f.label){case 0:return r=U(U({},o),{somodMiddlewareContext:new de}),n=u.length,i=function(){return ee(void 0,void 0,void 0,function(){var a,l,d;return te(this,function(_){switch(_.label){case 0:return n>0?(a=u[--n],[4,a(i,r,c)]):[3,2];case 1:return l=_.sent(),[2,l];case 2:return[4,bt(e,r,c,t)];case 3:return d=_.sent(),[2,d]}})})},[4,i()];case 1:return[2,f.sent()]}})})}};w.getMiddlewareHandler=Ot});var ve=p(x=>{"use strict";var Pt=x&&x.__createBinding||(Object.create?function(e,u,o,c){c===void 0&&(c=o);var t=Object.getOwnPropertyDescriptor(u,o);(!t||("get"in t?!u.__esModule:t.writable||t.configurable))&&(t={enumerable:!0,get:function(){return u[o]}}),Object.defineProperty(e,c,t)}:function(e,u,o,c){c===void 0&&(c=o),e[c]=u[o]});x.__esModule=!0;x.getMiddlewareHandler=void 0;var St=_e();Pt(x,St,"getMiddlewareHandler")});var He=p((Vr,F)=>{var ye,pe,he,ge,we,me,be,Oe,Pe,Se,Me,qe,De,C,re,xe,Ee,Ie,E,je,Te,Re,Ae,Ue,Ce,Ne,Fe,Be,N,Le,Ge;(function(e){var u=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(c){e(o(u,o(c)))}):typeof F=="object"&&typeof F.exports=="object"?e(o(u,o(F.exports))):e(o(u));function o(c,t){return c!==u&&(typeof Object.create=="function"?Object.defineProperty(c,"__esModule",{value:!0}):c.__esModule=!0),function(r,n){return c[r]=t?t(r,n):n}}})(function(e){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])};ye=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");u(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)},pe=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},he=function(t,r){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&r.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,i=Object.getOwnPropertySymbols(t);f<i.length;f++)r.indexOf(i[f])<0&&Object.prototype.propertyIsEnumerable.call(t,i[f])&&(n[i[f]]=t[i[f]]);return n},ge=function(t,r,n,i){var f=arguments.length,a=f<3?r:i===null?i=Object.getOwnPropertyDescriptor(r,n):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,n,i);else for(var d=t.length-1;d>=0;d--)(l=t[d])&&(a=(f<3?l(a):f>3?l(r,n,a):l(r,n))||a);return f>3&&a&&Object.defineProperty(r,n,a),a},we=function(t,r){return function(n,i){r(n,i,t)}},me=function(t,r,n,i,f,a){function l(I){if(I!==void 0&&typeof I!="function")throw new TypeError("Function expected");return I}for(var d=i.kind,_=d==="getter"?"get":d==="setter"?"set":"value",s=!r&&t?i.static?t:t.prototype:null,v=r||(s?Object.getOwnPropertyDescriptor(s,i.name):{}),g,y=!1,b=n.length-1;b>=0;b--){var S={};for(var M in i)S[M]=M==="access"?{}:i[M];for(var M in i.access)S.access[M]=i.access[M];S.addInitializer=function(I){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(I||null))};var q=(0,n[b])(d==="accessor"?{get:v.get,set:v.set}:v[_],S);if(d==="accessor"){if(q===void 0)continue;if(q===null||typeof q!="object")throw new TypeError("Object expected");(g=l(q.get))&&(v.get=g),(g=l(q.set))&&(v.set=g),(g=l(q.init))&&f.unshift(g)}else(g=l(q))&&(d==="field"?f.unshift(g):v[_]=g)}s&&Object.defineProperty(s,i.name,v),y=!0},be=function(t,r,n){for(var i=arguments.length>2,f=0;f<r.length;f++)n=i?r[f].call(t,n):r[f].call(t);return i?n:void 0},Oe=function(t){return typeof t=="symbol"?t:"".concat(t)},Pe=function(t,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",r):r})},Se=function(t,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,r)},Me=function(t,r,n,i){function f(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function d(v){try{s(i.next(v))}catch(g){l(g)}}function _(v){try{s(i.throw(v))}catch(g){l(g)}}function s(v){v.done?a(v.value):f(v.value).then(d,_)}s((i=i.apply(t,r||[])).next())})},qe=function(t,r){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,f,a,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(s){return function(v){return _([s,v])}}function _(s){if(i)throw new TypeError("Generator is already executing.");for(;l&&(l=0,s[0]&&(n=0)),n;)try{if(i=1,f&&(a=s[0]&2?f.return:s[0]?f.throw||((a=f.return)&&a.call(f),0):f.next)&&!(a=a.call(f,s[1])).done)return a;switch(f=0,a&&(s=[s[0]&2,a.value]),s[0]){case 0:case 1:a=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,f=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){n.label=s[1];break}if(s[0]===6&&n.label<a[1]){n.label=a[1],a=s;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(s);break}a[2]&&n.ops.pop(),n.trys.pop();continue}s=r.call(t,n)}catch(v){s=[6,v],f=0}finally{i=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},De=function(t,r){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&N(r,t,n)},N=Object.create?function(t,r,n,i){i===void 0&&(i=n);var f=Object.getOwnPropertyDescriptor(r,n);(!f||("get"in f?!r.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(t,i,f)}:function(t,r,n,i){i===void 0&&(i=n),t[i]=r[n]},C=function(t){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&t[r],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},re=function(t,r){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),f,a=[],l;try{for(;(r===void 0||r-- >0)&&!(f=i.next()).done;)a.push(f.value)}catch(d){l={error:d}}finally{try{f&&!f.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a},xe=function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(re(arguments[r]));return t},Ee=function(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;for(var i=Array(t),f=0,r=0;r<n;r++)for(var a=arguments[r],l=0,d=a.length;l<d;l++,f++)i[f]=a[l];return i},Ie=function(t,r,n){if(n||arguments.length===2)for(var i=0,f=r.length,a;i<f;i++)(a||!(i in r))&&(a||(a=Array.prototype.slice.call(r,0,i)),a[i]=r[i]);return t.concat(a||Array.prototype.slice.call(r))},E=function(t){return this instanceof E?(this.v=t,this):new E(t)},je=function(t,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,r||[]),f,a=[];return f={},l("next"),l("throw"),l("return"),f[Symbol.asyncIterator]=function(){return this},f;function l(y){i[y]&&(f[y]=function(b){return new Promise(function(S,M){a.push([y,b,S,M])>1||d(y,b)})})}function d(y,b){try{_(i[y](b))}catch(S){g(a[0][3],S)}}function _(y){y.value instanceof E?Promise.resolve(y.value.v).then(s,v):g(a[0][2],y)}function s(y){d("next",y)}function v(y){d("throw",y)}function g(y,b){y(b),a.shift(),a.length&&d(a[0][0],a[0][1])}},Te=function(t){var r,n;return r={},i("next"),i("throw",function(f){throw f}),i("return"),r[Symbol.iterator]=function(){return this},r;function i(f,a){r[f]=t[f]?function(l){return(n=!n)?{value:E(t[f](l)),done:!1}:a?a(l):l}:a}},Re=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t[Symbol.asyncIterator],n;return r?r.call(t):(t=typeof C=="function"?C(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(l){return new Promise(function(d,_){l=t[a](l),f(d,_,l.done,l.value)})}}function f(a,l,d,_){Promise.resolve(_).then(function(s){a({value:s,done:d})},l)}},Ae=function(t,r){return Object.defineProperty?Object.defineProperty(t,"raw",{value:r}):t.raw=r,t};var o=Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r};Ue=function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&N(r,t,n);return o(r,t),r},Ce=function(t){return t&&t.__esModule?t:{default:t}},Ne=function(t,r,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?t!==r||!i:!r.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:r.get(t)},Fe=function(t,r,n,i,f){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?t!==r||!f:!r.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?f.call(t,n):f?f.value=n:r.set(t,n),n},Be=function(t,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?r===t:t.has(r)},Le=function(t,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=r[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=r[Symbol.dispose]}if(typeof i!="function")throw new TypeError("Object not disposable.");t.stack.push({value:r,dispose:i,async:n})}else n&&t.stack.push({async:!0});return r};var c=typeof SuppressedError=="function"?SuppressedError:function(t,r,n){var i=new Error(n);return i.name="SuppressedError",i.error=t,i.suppressed=r,i};Ge=function(t){function r(i){t.error=t.hasError?new c(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}function n(){for(;t.stack.length;){var i=t.stack.pop();try{var f=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(f).then(n,function(a){return r(a),n()})}catch(a){r(a)}}if(t.hasError)throw t.error}return n()},e("__extends",ye),e("__assign",pe),e("__rest",he),e("__decorate",ge),e("__param",we),e("__esDecorate",me),e("__runInitializers",be),e("__propKey",Oe),e("__setFunctionName",Pe),e("__metadata",Se),e("__awaiter",Me),e("__generator",qe),e("__exportStar",De),e("__createBinding",N),e("__values",C),e("__read",re),e("__spread",xe),e("__spreadArrays",Ee),e("__spreadArray",Ie),e("__await",E),e("__asyncGenerator",je),e("__asyncDelegator",Te),e("__asyncValues",Re),e("__makeTemplateObject",Ae),e("__importStar",Ue),e("__importDefault",Ce),e("__classPrivateFieldGet",Ne),e("__classPrivateFieldSet",Fe),e("__classPrivateFieldIn",Be),e("__addDisposableResource",Le),e("__disposeResources",Ge)})});var ae=p(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.default=Dt;var Mt=qt(require("crypto"));function qt(e){return e&&e.__esModule?e:{default:e}}var L=new Uint8Array(256),B=L.length;function Dt(){return B>L.length-16&&(Mt.default.randomFillSync(L),B=0),L.slice(B,B+=16)}});var ze=p(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.default=void 0;var xt=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;G.default=xt});var j=p(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.default=void 0;var Et=It(ze());function It(e){return e&&e.__esModule?e:{default:e}}function jt(e){return typeof e=="string"&&Et.default.test(e)}var Tt=jt;H.default=Tt});var R=p(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.default=void 0;T.unsafeStringify=We;var Rt=At(j());function At(e){return e&&e.__esModule?e:{default:e}}var h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).slice(1));function We(e,u=0){return h[e[u+0]]+h[e[u+1]]+h[e[u+2]]+h[e[u+3]]+"-"+h[e[u+4]]+h[e[u+5]]+"-"+h[e[u+6]]+h[e[u+7]]+"-"+h[e[u+8]]+h[e[u+9]]+"-"+h[e[u+10]]+h[e[u+11]]+h[e[u+12]]+h[e[u+13]]+h[e[u+14]]+h[e[u+15]]}function Ut(e,u=0){let o=We(e,u);if(!(0,Rt.default)(o))throw TypeError("Stringified UUID is invalid");return o}var Ct=Ut;T.default=Ct});var $e=p(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.default=void 0;var Nt=Bt(ae()),Ft=R();function Bt(e){return e&&e.__esModule?e:{default:e}}var Ye,ie,ue=0,oe=0;function Lt(e,u,o){let c=u&&o||0,t=u||new Array(16);e=e||{};let r=e.node||Ye,n=e.clockseq!==void 0?e.clockseq:ie;if(r==null||n==null){let _=e.random||(e.rng||Nt.default)();r==null&&(r=Ye=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),n==null&&(n=ie=(_[6]<<8|_[7])&16383)}let i=e.msecs!==void 0?e.msecs:Date.now(),f=e.nsecs!==void 0?e.nsecs:oe+1,a=i-ue+(f-oe)/1e4;if(a<0&&e.clockseq===void 0&&(n=n+1&16383),(a<0||i>ue)&&e.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ue=i,oe=f,ie=n,i+=122192928e5;let l=((i&268435455)*1e4+f)%4294967296;t[c++]=l>>>24&255,t[c++]=l>>>16&255,t[c++]=l>>>8&255,t[c++]=l&255;let d=i/4294967296*1e4&268435455;t[c++]=d>>>8&255,t[c++]=d&255,t[c++]=d>>>24&15|16,t[c++]=d>>>16&255,t[c++]=n>>>8|128,t[c++]=n&255;for(let _=0;_<6;++_)t[c+_]=r[_];return u||(0,Ft.unsafeStringify)(t)}var Gt=Lt;K.default=Gt});var fe=p(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.default=void 0;var Ht=Kt(j());function Kt(e){return e&&e.__esModule?e:{default:e}}function Vt(e){if(!(0,Ht.default)(e))throw TypeError("Invalid UUID");let u,o=new Uint8Array(16);return o[0]=(u=parseInt(e.slice(0,8),16))>>>24,o[1]=u>>>16&255,o[2]=u>>>8&255,o[3]=u&255,o[4]=(u=parseInt(e.slice(9,13),16))>>>8,o[5]=u&255,o[6]=(u=parseInt(e.slice(14,18),16))>>>8,o[7]=u&255,o[8]=(u=parseInt(e.slice(19,23),16))>>>8,o[9]=u&255,o[10]=(u=parseInt(e.slice(24,36),16))/1099511627776&255,o[11]=u/4294967296&255,o[12]=u>>>24&255,o[13]=u>>>16&255,o[14]=u>>>8&255,o[15]=u&255,o}var Jt=Vt;V.default=Jt});var le=p(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.URL=D.DNS=void 0;D.default=Qt;var zt=R(),Wt=Yt(fe());function Yt(e){return e&&e.__esModule?e:{default:e}}function $t(e){e=unescape(encodeURIComponent(e));let u=[];for(let o=0;o<e.length;++o)u.push(e.charCodeAt(o));return u}var Qe="6ba7b810-9dad-11d1-80b4-00c04fd430c8";D.DNS=Qe;var Xe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";D.URL=Xe;function Qt(e,u,o){function c(t,r,n,i){var f;if(typeof t=="string"&&(t=$t(t)),typeof r=="string"&&(r=(0,Wt.default)(r)),((f=r)===null||f===void 0?void 0:f.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+t.length);if(a.set(r),a.set(t,r.length),a=o(a),a[6]=a[6]&15|u,a[8]=a[8]&63|128,n){i=i||0;for(let l=0;l<16;++l)n[i+l]=a[l];return n}return(0,zt.unsafeStringify)(a)}try{c.name=e}catch{}return c.DNS=Qe,c.URL=Xe,c}});var Ze=p(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.default=void 0;var Xt=Zt(require("crypto"));function Zt(e){return e&&e.__esModule?e:{default:e}}function kt(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Xt.default.createHash("md5").update(e).digest()}var er=kt;J.default=er});var et=p(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.default=void 0;var tr=ke(le()),rr=ke(Ze());function ke(e){return e&&e.__esModule?e:{default:e}}var nr=(0,tr.default)("v3",48,rr.default),ar=nr;z.default=ar});var tt=p(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.default=void 0;var ir=ur(require("crypto"));function ur(e){return e&&e.__esModule?e:{default:e}}var or={randomUUID:ir.default.randomUUID};W.default=or});var at=p(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.default=void 0;var rt=nt(tt()),fr=nt(ae()),lr=R();function nt(e){return e&&e.__esModule?e:{default:e}}function cr(e,u,o){if(rt.default.randomUUID&&!u&&!e)return rt.default.randomUUID();e=e||{};let c=e.random||(e.rng||fr.default)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,u){o=o||0;for(let t=0;t<16;++t)u[o+t]=c[t];return u}return(0,lr.unsafeStringify)(c)}var sr=cr;Y.default=sr});var it=p($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.default=void 0;var dr=_r(require("crypto"));function _r(e){return e&&e.__esModule?e:{default:e}}function vr(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),dr.default.createHash("sha1").update(e).digest()}var yr=vr;$.default=yr});var ot=p(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.default=void 0;var pr=ut(le()),hr=ut(it());function ut(e){return e&&e.__esModule?e:{default:e}}var gr=(0,pr.default)("v5",80,hr.default),wr=gr;Q.default=wr});var ft=p(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.default=void 0;var mr="00000000-0000-0000-0000-000000000000";X.default=mr});var lt=p(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.default=void 0;var br=Or(j());function Or(e){return e&&e.__esModule?e:{default:e}}function Pr(e){if(!(0,br.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var Sr=Pr;Z.default=Sr});var ct=p(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});Object.defineProperty(m,"NIL",{enumerable:!0,get:function(){return Er.default}});Object.defineProperty(m,"parse",{enumerable:!0,get:function(){return Rr.default}});Object.defineProperty(m,"stringify",{enumerable:!0,get:function(){return Tr.default}});Object.defineProperty(m,"v1",{enumerable:!0,get:function(){return Mr.default}});Object.defineProperty(m,"v3",{enumerable:!0,get:function(){return qr.default}});Object.defineProperty(m,"v4",{enumerable:!0,get:function(){return Dr.default}});Object.defineProperty(m,"v5",{enumerable:!0,get:function(){return xr.default}});Object.defineProperty(m,"validate",{enumerable:!0,get:function(){return jr.default}});Object.defineProperty(m,"version",{enumerable:!0,get:function(){return Ir.default}});var Mr=P($e()),qr=P(et()),Dr=P(at()),xr=P(ot()),Er=P(ft()),Ir=P(lt()),jr=P(j()),Tr=P(R()),Rr=P(fe());function P(e){return e&&e.__esModule?e:{default:e}}});var Lr={};wt(Lr,{default:()=>Br});module.exports=mt(Lr);var _t=k(ve());var Ke=k(He(),1),{__extends:Jr,__assign:zr,__rest:Wr,__decorate:Yr,__param:$r,__esDecorate:Qr,__runInitializers:Xr,__propKey:Zr,__setFunctionName:kr,__metadata:en,__awaiter:Ve,__generator:Je,__exportStar:tn,__createBinding:rn,__values:nn,__read:an,__spread:un,__spreadArrays:on,__spreadArray:fn,__await:ln,__asyncGenerator:cn,__asyncDelegator:sn,__asyncValues:dn,__makeTemplateObject:_n,__importStar:vn,__importDefault:yn,__classPrivateFieldGet:pn,__classPrivateFieldSet:hn,__classPrivateFieldIn:gn,__addDisposableResource:wn,__disposeResources:mn}=Ke.default;var ce=require("aws-sdk");var O=k(ct(),1),st=O.default.v1,Fn=O.default.v3,Bn=O.default.v4,Ln=O.default.v5,Gn=O.default.NIL,Hn=O.default.version,Kn=O.default.validate,Vn=O.default.stringify,Jn=O.default.parse;var Ar=new ce.DynamoDB({apiVersion:"2012-08-10",region:process.env.AWS_REGION}),Ur=process.env.TABLE_NAME,Cr=process.env.API_KEY,Nr=function(e){return Ve(void 0,void 0,void 0,function(){var u,o,c,t;return Je(this,function(r){switch(r.label){case 0:return e.headers.authorization!==Cr?[2,{statusCode:401}]:(u=JSON.parse(e.body||"{}"),u?.message===void 0||u?.audience===void 0?[2,{statusCode:400,body:JSON.stringify({error:"must have 'message' and 'audience' properties in the body"}),headers:{"Content-Type":"application/json"}}]:((c=u.audience)===null||c===void 0?void 0:c.userId)===void 0&&((t=u.audience)===null||t===void 0?void 0:t.groupId)===void 0?[2,{statusCode:400,body:JSON.stringify({error:"audience property must have 'userId' or 'groupId'"}),headers:{"Content-Type":"application/json"}}]:(o=st(),[4,Ar.putItem({TableName:Ur,Item:ce.DynamoDB.Converter.marshall({messageId:o,message:u.message,audience:u.audience})}).promise()]));case 1:return r.sent(),[2,{statusCode:200,body:JSON.stringify({messageId:o}),headers:{"Content-Type":"application/json"}}]}})})},dt=Nr;var Fr=(0,_t.getMiddlewareHandler)(dt,[]),Br=Fr;0&&(module.exports={});
